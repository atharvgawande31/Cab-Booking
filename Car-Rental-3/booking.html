<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Car Booking</title>
 
</head>
<script src="https://cdn.tailwindcss.com"></script>

<body class="bg-gray-100">

  <!-- Header -->
  <header class="bg-gray-200 py-6 mb-6">
    <div class="max-w-6xl mx-auto px-4">
      <nav class="text-sm mb-2">
        <a href="/Car-Rental-3/index.html" class="text-gray-600 hover:text-gray-900">Home</a> /
        <a href="/Car-Rental-3/cars.html" class="text-gray-600 hover:text-gray-900">Cars</a> /
        <span class="font-medium">Booking</span>
      </nav>
      <h1 class="text-3xl font-bold">Complete Your Booking</h1>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-3 gap-8">
    
    <!-- Booking Form -->
    <form class="lg:col-span-2 space-y-6" id="bookingForm">
      <!-- Rental Details -->
      <div class="bg-white shadow rounded p-4">
        <h2 class="font-semibold text-lg mb-4">Rental Details</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <input type="text" placeholder="Pickup Location" id="pickupLocation" class="border p-2 rounded w-full" required>
          <input type="text" placeholder="Dropoff Location" id="dropoffLocation" class="border p-2 rounded w-full" required>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <input type="date" id="pickupDate" class="border p-2 rounded w-full" required>
          <input type="time" id="pickupTime" class="border p-2 rounded w-full" required>
          <input type="date" id="dropoffDate" class="border p-2 rounded w-full" required>
          <input type="time" id="dropoffTime" class="border p-2 rounded w-full" required>
        </div>
      </div>

      <!-- Personal Information -->
      <div class="bg-white shadow rounded p-4">
        <h2 class="font-semibold text-lg mb-4">Personal Information</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <input type="text" placeholder="First Name" id="firstName" class="border p-2 rounded w-full" required>
          <input type="text" placeholder="Last Name" id="lastName" class="border p-2 rounded w-full" required>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <input type="email" placeholder="Email" id="email" class="border p-2 rounded w-full" required>
          <input type="tel" placeholder="Phone" id="phone" class="border p-2 rounded w-full" required>
        </div>
        <input type="text" placeholder="Driver's License Number" id="licenseNumber" class="border p-2 rounded w-full mb-4" required>
      </div>

      <!-- Insurance Options -->
      <div class="bg-white shadow rounded p-4">
        <h2 class="font-semibold text-lg mb-4">Insurance Coverage</h2>
        <div>
          <label class="flex items-center mb-2">
            <input type="radio" name="insurance" value="basic" checked class="mr-2">
            Basic Coverage (Included)
          </label>
          <label class="flex items-center mb-2">
            <input type="radio" name="insurance" value="premium" class="mr-2">
            Premium Coverage (+$25/day)
          </label>
          <label class="flex items-center mb-2">
            <input type="radio" name="insurance" value="comprehensive" class="mr-2">
            Comprehensive Coverage (+$45/day)
          </label>
        </div>
      </div>

      <!-- Special Requests -->
      <div class="bg-white shadow rounded p-4">
        <h2 class="font-semibold text-lg mb-4">Special Requests (Optional)</h2>
        <textarea placeholder="Any special requests..." id="specialRequests" class="border p-2 rounded w-full" rows="3"></textarea>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white p-3 rounded hover:bg-blue-700">Proceed to Payment</button>
    </form>

    <!-- Booking Summary -->
    <aside class="lg:col-span-1 sticky top-6">
      <div class="bg-white shadow rounded p-4 space-y-4">
        <h2 class="font-semibold text-lg">Booking Summary</h2>
        <div>
          <h3 class="font-medium">BMW X5</h3>
          <p class="text-gray-600">Luxury SUV</p>
          <p class="text-gray-600">5 Passengers, Petrol, Auto</p>
        </div>
        <div>
          <h4 class="font-medium mt-4">Rental Period</h4>
          <p id="summaryDays">Duration: 1 day</p>
          <p id="summaryPickup"></p>
          <p id="summaryDropoff"></p>
        </div>
        <div>
          <h4 class="font-medium mt-4">Price Breakdown</h4>
          <p id="summaryCar">$120</p>
          <p id="summaryInsurance">Insurance: Included</p>
          <p id="summaryTaxes">Taxes & Fees: $18.00</p>
          <p class="font-semibold" id="summaryTotal">Total: $138.00</p>
        </div>
      </div>
    </aside>
  </main>

  <script>
    // ---- Settings ----
    const carPrice = 120;
    const insurancePrices = { basic: 0, premium: 25, comprehensive: 45 };
    const taxesRate = 0.15;

    // ---- Form Elements ----
    const formElements = {
      pickupLocation: document.getElementById('pickupLocation'),
      dropoffLocation: document.getElementById('dropoffLocation'),
      pickupDate: document.getElementById('pickupDate'),
      dropoffDate: document.getElementById('dropoffDate'),
      insurance: document.getElementsByName('insurance')
    };

    // ---- Summary Elements ----
    const summaryDays = document.getElementById('summaryDays');
    const summaryPickup = document.getElementById('summaryPickup');
    const summaryDropoff = document.getElementById('summaryDropoff');
    const summaryCar = document.getElementById('summaryCar');
    const summaryInsurance = document.getElementById('summaryInsurance');
    const summaryTaxes = document.getElementById('summaryTaxes');
    const summaryTotal = document.getElementById('summaryTotal');

    // ---- Calculate Summary ----
    function calculateSummary() {
      const pickupDate = new Date(formElements.pickupDate.value);
      const dropoffDate = new Date(formElements.dropoffDate.value);
      let days = 1;
      if (formElements.pickupDate.value && formElements.dropoffDate.value) {
        const diffTime = dropoffDate - pickupDate;
        days = Math.ceil(diffTime / (1000 * 3600 * 24)) || 1;
      }

      summaryDays.textContent = `Duration: ${days} day${days>1?'s':''}`;
      summaryPickup.textContent = formElements.pickupDate.value ? `Pickup: ${pickupDate.toLocaleDateString()}` : '';
      summaryDropoff.textContent = formElements.dropoffDate.value ? `Dropoff: ${dropoffDate.toLocaleDateString()}` : '';

      const selectedInsurance = Array.from(formElements.insurance).find(r => r.checked).value;
      const insuranceCost = insurancePrices[selectedInsurance] * days;
      const subtotal = carPrice * days;
      const taxes = (subtotal + insuranceCost) * taxesRate;
      const total = subtotal + insuranceCost + taxes;

      summaryCar.textContent = `Car rental (${days} day${days>1?'s':''}): $${subtotal.toFixed(2)}`;
      summaryInsurance.textContent = selectedInsurance === 'basic' ? 'Insurance: Included' : `Insurance: $${insuranceCost.toFixed(2)}`;
      summaryTaxes.textContent = `Taxes & Fees: $${taxes.toFixed(2)}`;
      summaryTotal.textContent = `Total: $${total.toFixed(2)}`;
    }

    // ---- Pre-fill from URL parameters ----
    function prefillFromURL() {
      const params = new URLSearchParams(window.location.search);
      if(params.get('pickupLocation')) formElements.pickupLocation.value = params.get('pickupLocation');
      if(params.get('dropoffLocation')) formElements.dropoffLocation.value = params.get('dropoffLocation');
      if(params.get('pickupDate')) formElements.pickupDate.value = params.get('pickupDate');
      if(params.get('dropoffDate')) formElements.dropoffDate.value = params.get('dropoffDate');
      if(params.get('insurance')){
        Array.from(formElements.insurance).forEach(r => { if(r.value === params.get('insurance')) r.checked = true; });
      }
      calculateSummary();
    }

    // ---- Event Listeners ----
    formElements.pickupDate.addEventListener('change', calculateSummary);
    formElements.dropoffDate.addEventListener('change', calculateSummary);
    Array.from(formElements.insurance).forEach(radio => radio.addEventListener('change', calculateSummary));

    document.getElementById('bookingForm').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Proceeding to Payment...');
    });

    // ---- Initialize ----
    prefillFromURL();
  </script>

</body>
</html>